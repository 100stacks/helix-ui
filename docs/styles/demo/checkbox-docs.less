@import (reference) 'components/checkbox';

.checkbox-test {
  hx-checkbox-control {
    > label {
      > hx-checkbox {
        display: none;
      }
    }

    /* ----- PRISTINE ----- */
    > input[type="checkbox"] {
      /* imitate :focus */
      &.mock-focus {
        &:extend(hx-checkbox-control > input[type="checkbox"]:focus all);
      }

      /* imitate :hover */
      &.mock-hover {
        &:extend(hx-checkbox-control > input[type="checkbox"]:hover all);

        ~ label > hx-checkbox {
          &:extend(hx-checkbox-control > input[type="checkbox"]:valid ~ label > hx-checkbox:hover all);
        }
      }

      /* imitate :disabled:focus */
      &:disabled.mock-focus {
        &:extend(hx-checkbox-control > input[type="checkbox"]:disabled:focus all);
      }

      /* imitate :disabled:hover */
      &:disabled.mock-hover {
        &:extend(hx-checkbox-control > input[type="checkbox"]:disabled:hover all);

        ~ label > hx-checkbox {
          &:extend(hx-checkbox-control > input[type="checkbox"]:disabled ~ label > hx-checkbox:hover all);
        }
      }
    }

    /* ----- CHANGED OR TOUCHED ----- */
    &[hx-changed],
    &[hx-touched] {
      > input[type="checkbox"]:invalid {
        /* imitate :focus */
        &.mock-focus {
          &:extend(hx-checkbox-control[hx-changed] > input[type="checkbox"]:invalid:focus all);
        }

        /* imitate :hover */
        &.mock-hover {
          &:extend(hx-checkbox-control[hx-changed] > input[type="checkbox"]:invalid:hover all);

          ~ label > hx-checkbox {
            &:extend(hx-checkbox-control[hx-changed] > input[type="checkbox"]:invalid ~ label > hx-checkbox:hover all);
          }
        }
      }
    }

    /* ----- FORCE INVALID ----- */
    &.hxInvalid {
      > input[type="checkbox"]:enabled {
        /* imitate :focus */
        &.mock-focus {
          &:extend(hx-checkbox-control.hxInvalid > input[type="checkbox"]:enabled:focus all);
        }

        /* imitate :hover */
        &.mock-hover {
          &:extend(hx-checkbox-control.hxInvalid > input[type="checkbox"]:enabled:hover all);

          ~ label > hx-checkbox {
            &:extend(hx-checkbox-control.hxInvalid > input[type="checkbox"]:enabled ~ label > hx-checkbox:hover all);
          }
        }
      }
    }
  }
}

@supports (--modern: true) {
  .checkbox-test {
    hx-checkbox-control {
      > label {
        > hx-checkbox {
          display: inline-block;
        }
      }
    }
  }
}
